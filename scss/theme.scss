@use 'color';
@use 'fonts';
@use 'themes/dark';
@use 'themes/windows31';
@use 'themes/deepred';
@use 'themes/royalpeach';

.sauce-enabled {
    .sauce-button.button {
        color: color.shade(accent, 80%) !important;
        background-image: linear-gradient(to bottom,
                                          color.shade(accent, 8%),
                                          color.shade(accent, -2%) 33%,
                                          color.shade(accent, 0%));
        transition: box-shadow 200ms;

        &:hover:not(.disabled) {
            background-image: linear-gradient(to bottom,
                                              color.shade(accent, 2%),
                                              color.shade(accent, -8%) 33%,
                                              color.shade(accent, -6%));
            box-shadow: 1px 1px 5px color.shade(fg, 10%, 0.2);
        }

        &:active:not(.disabled) {
            box-shadow: 0 0 8px color.shade(fg, 10%, 0.5) inset;
        }

        &.disabled {
            opacity: 0.6;
            filter: brightness(85%);
            pointer-events: auto;
            cursor: not-allowed;
        }
    }
}

.sauce-theme-enabled {
    $hard-border-color: color.shade(bg, 20%);
    $mid-border-color: color.shade(bg, 10%);
    $soft-border-color: color.shade(bg, 5%);

    $link-accent: accent4;
    $link-color: color.get(accent4);
    $link-color-hover: color.shade(accent4, 10%);

    body {
        background-color: color.get(bg);
        color: color.get(fg);
    }

    a {
        &,
        &:visited,
        &:link {
            color: $link-color;
        }

        &:hover {
            color: $link-color-hover;
        }
    }

    .starred.active .app-icon.icon-star {
        filter: none !important;
    }

    .card {
        background-color: color.shade(bg, 8%);
        color: color.shade(fg, 8%);
        border-color: $hard-border-color;

        .card-footer,
        .card-section {
            border-color: $hard-border-color;
        }
    }

    #notifications-button {
        border: none;
    }

    .alert-message {
        color: #fff;  // Reset to strava value to work with the fixed BG they set.

        a {
            color: #fff !important;
        }
    }

    .btn,
    .button,
    a.button, // hack to win over a:link style
    button,
    input[type="submit"],
    input[type="button"],
    input[type="reset"],
    .selection,
    .pagination a,
    .pagination span,
    .pagination em {
        color: color.shade(fg, 8%);

        &.minimal {
            background-color: color.shade(bg, 3%);
            border-color: $mid-border-color;
            color: color.shade(fg, 3%);
        }

        &:not(.btn-unstyled) {
            background-color: color.shade(bg, 8%);
            border-color: $mid-border-color;

            &:hover,
            &:focus {
                background-color: color.shade(bg, 12%);
                border-color: $hard-border-color;
            }

            &:active,
            &.active {
                background-color: color.shade(bg, 2%);
            }

            &[disabled],
            &.disabled {
                background-color: color.shade(bg, 5%);
            }
        }

        &:hover,
        &:focus {
            color: color.shade(fg, 5%);
        }

        &:active,
        &.active {
            color: color.shade(fg, 12%);
        }

        &[disabled],
        &.disabled {
            color: color.shade(fg, 12%);
        }

        &.btn-link {
            border-color: transparent;
            background-color: transparent;
            color: color.shade(fg, 8%);

            &:hover {
                color: $link-color-hover;
                border-color: transparent;  // undo basic button theme border
            }
        }
    }

    .btn-primary,
    button[class*="Button--primary--"] {
        &:not(.btn-outline):not(.btn-link) {
            border-color: color.shade(accent, 10%);
            background-color: color.shade(accent, 10%);
            color: color.shade(accent, 80%);

            &:hover {
                border-color: color.shade(accent, -5%);
                background-color: color.shade(accent, -5%);
                color: color.shade(accent, 90%);
            }
        }

        &.btn-outline {
            border-color: color.shade(accent, 12%);
            background-color: transparent;
            color: color.shade(accent, 12%);

            &:hover {
                background-color: color.shade(accent, 12%);
                color: color.shade(accent, 80%);
            }
        }
    }

    button[class*="Button--primary-outline--"] {
        border-color: color.shade(accent, 10%) !important;
        background-color: transparent !important;
        color: color.shade(accent, 10%);

        &:hover {
            border-color: color.shade(accent, -5%) !important;
            background-color: color.shade(accent, -5%) !important;
            color: color.shade(accent, 90%);
        }
    }

    .page {
        a:not(.btn):not(.button),
        .btn.btn-link {
            &:link,
            &:visited {
                color: color.shade(fg, 10%);
            }

            &:hover {
                color: $link-color-hover;
            }

            &:active {
                color: color.shade($link-accent, 20%);
            }
        }
    }

    .btn,
    .button,
    button,
    input[type='submit'],
    input[type='button'],
    input[type='reset'] {
        &.btn-unstyled {
            background-color: transparent;
            color: color.get(fg);
        }

        &.tag {
            background-blend-mode: overlay;
            background-color: color.get(bg);
        }
    }

    button[role="slider"] {
        background-image: linear-gradient(135deg,
                                          color.shade(accent, 8%),
                                          color.shade(accent, -12%));
        border-color: color.shade(fg, 12%);
    }

    .switches {
        button,
        .button,
        a.button:link,
        a.button:visited,
        a.button:hover {
            &.selected,
            &.active,
            &:active {
                background-color: color.shade(bg, 5%);
                background-image: none;
                color: color.shade(fg, 5%) !important;
                border-color: $mid-border-color;
            }
        }
    }

    #switch-discipline .button {
        color: color.shade(fg, 8%);
    }

    .pagination {
        .disabled,
        .disabled:hover {
            background-color: #5551;
            border-color: #5555;
            color: color.darken(fg, 10%);
        }

        .active .btn,
        .active span {
            background-color: color.shade(accent, -5%);
            border-color: color.shade(accent, -20%);
            color: color.get(fg);
        }
    }

    & {
        $link-bg: color.shade(bg, 10%);
        $link-fg: color.shade(fg, 10%);
        $link-bg-hover: color.shade(bg, 15%);
        $summit-group-bg: color.shade(accent4, 15%);
        $summit-group-fg: color.shade(accent4, -60%);
        $summit-group-bg-hover: color.shade(accent4, 20%);

        .drop-down-menu {
            &.minimal .selection {
                background-color: transparent;
            }

            &:not(.minimal).active .selection {
                background-color: $link-bg;
            }

            .options {
                background-color: $link-bg;
                color: $link-fg;
                border-color: $hard-border-color;

                li > * {
                    color: inherit;
                }

                .sauce-group {
                    color: color.shade(accent, 80%);
                }
            }
        }

        .drop-down-menu:not(.prio-hack):not(.prio-hack2):not(.prio-hack3),
        .slide-menu {
            .options {
                a:hover,
                .clickable:hover,
                .btn:hover {
                    background-color: $link-bg-hover;
                }

                .opt-group.premium {
                    background-color: $summit-group-bg;
                    color: $summit-group-fg;

                    a,
                    .clickable,
                    .btn {
                        color: $summit-group-fg;

                        &:hover {
                            background-color: $summit-group-bg-hover;
                        }
                    }
                }
            }
        }

        [class*="components--menu--"] {
            [class*="components--menu-items--"] {
                background-color: $link-bg;
                border: none;

                a:link,
                a:visted {
                    background-color: $link-bg;
                }

                a:hover,
                a:active {
                    background-color: $link-bg-hover;
                }

                a[class*="components--summit--"] {
                    &:link,
                    &:visited {
                        background-color: $summit-group-bg;
                    }

                    &:hover,
                    &:active {
                        background-color: $summit-group-bg-hover;
                    }
                }

                [class*="components--subscription-callout--"] {
                    border-color: $hard-border-color;
                    background-color: $summit-group-bg;
                }
            }
        }
    }

    .slide-menu {
        box-shadow: none;

        .active {
            background: transparent;
        }
    }

    .pagenav:not(.prio-hack):not(.prio-hack2):not(.prio-hack3) {
        border: none;
        background-color: color.shade(bg, 5%);

        li {
            border-color: $hard-border-color;

            a {
                color: color.shade(fg, 10%);

                &:hover,
                &:active {
                    background-color: color.shade(bg, 10%);
                }

                &:focus {
                    outline: none;
                }
            }

            .title.small {
                color: color.shade(fg, 20%);
            }

            &.selected a {
                color: color.shade(fg, 10%);
            }
        }
    }

    #basic-analysis {
        .chart,
        #stacked-chart {
            background-color: color.shade(bg, 8%);
        }

        .xaxis-container .background,
        rect.static-label-box,
        rect.static-info-box {
            fill: color.shade(bg, 10%);
        }

        text.static-info-box.value {
            fill: color.shade(fg, 0%);
        }
    }

    #global-header,
    [class*="src--global-header--"] {
        background-color: color.shade(accent, -15%) !important;
        border: none;
    }

    & {
        $nav-link-color: color.shade(accent, 80%);
        $nav-link-hover-color: color.shade(accent, 85%);
        $nav-selected-shadow: inset 0 -2px 0 0 color.shade(accent, 60%);

        #global-header {
            .collapsable-nav {
                a.btn.btn-mobile-menu {
                    background-color: transparent;
                }
            }

            #notifications-button {
                background: transparent;
            }

            #notifications-drop-down {
                background-color: color.lighten(bg, 10%);
                color: color.darken(fg, 10%);

                li a {
                    color: color.darken(fg, 10%);

                    &:hover {
                        background-color: color.lighten(bg, 5%);
                    }
                }
            }

            .nav-group .drop-down-menu {
                &.active,
                &:hover {
                    background-color: #0006;

                    .nav-link {
                        background: transparent;
                        color: $nav-link-hover-color;
                    }
                }

                .selection {
                    border: none;
                }

                .app-icon {
                    filter: initial;
                    background-position: initial !important;
                }

                .options .selected a {
                    color: color.shade(fg, -5%);
                }
            }

            .nav-bar {
                .nav-link,
                .nav-link:visited {
                    color: $nav-link-color;
                }

                .selected.nav-item {
                    box-shadow: $nav-selected-shadow;
                }

                .nav-item {
                    &,
                    &:hover {
                        .btn-default {
                            color: color.shade(fg, 8%);
                        }

                        .btn-primary {
                            color: color.shade(accent, 50%);
                            background-color: color.shade(accent, -25%);
                            border-color: color.shade(accent, -25%);

                            &:hover {
                                color: color.shade(accent, 70%);
                                background-color: color.shade(accent, -30%);
                            }
                        }
                    }
                }
            }
        }

        [class*="src--global-header--"] {
            a:link,
            a:visited {
                color: $nav-link-color;
            }

            [class*="components--menu--"] {
                &:hover,
                &:active {
                    [class*="components--button--"] {
                        background-color: #0006;
                        border: none;
                    }
                }
            }

            [class*="components--nav--"] [class*="components--nav-item--"][class*="components--selected"] {
                box-shadow: $nav-selected-shadow;
            }
        }
    }

    &.sauce-analysis {
        section,
        .section {
            header,
            .header {
                background-color: color.shade(bg, 10%);
                border: none;
            }

            footer,
            .footer {
                box-shadow: none;
            }

            &.with-border {
                border-color: $soft-border-color;
            }
        }

        .section {
            border-color: $hard-border-color;
        }
    }

    footer.achievements {
        background-color: color.lighten(bg, 5%);
    }

    thead th {
        border-bottom-color: $hard-border-color;
    }

    table:not(.unstyled) > thead > tr {
        background-color: color.lighten(bg, 5%);
    }

    .grabber {
        background-color: color.lighten(bg, 10%);
        background-blend-mode: overlay;
    }

    .ReactModal__Content [class|="Modal--content"] {
        background-color: color.lighten(bg, 5%);
    }

    [class*="Modal--body--"] {
        color: unset;
    }

    [class*="ModalWithTabs--content--"],
    [class*="ModalWithTabs--dialog--"] {
        color: color.shade(fg, 0%);

        [class*="ModalWithTabs--tab-list--"] {
            background-color: color.shade(bg, 10%);
            color: unset;
            border-bottom: $hard-border-color;

            [class*="ModalWithTabs--tab--"] {
                background-color: transparent;
                color: unset;
            }

            button[data-selected] {
                background-color: color.shade(bg, 5%);
            }
            button:hover:not([data-selected]) {
                background-color: color.shade(bg, 3%) !important;
            }
        }

        [class*="ModalWithTabs--tabs--"] {
            background-color: unset;
            color: unset;
        }

        [class*="KudosCommentsAndAchievementsModal--footer--"] {
            background-color: color.shade(bg, 15%);
            color: unset;
            border-color: $hard-border-color;
        }

        [class*="KudosCommentsAndAchievementsModal--"] {
            a:visited,
            a:link {
                color: unset;
                color: $link-color;

                &:hover {
                    color: $link-color-hover;
                }
            }
        }

        button[class*="Button--btn--"] {
            background-color: transparent;
            border-color: transparent;
        }
    }

    [class*="StravaMentionsInput--body--"],
    .sauce-new-comment {
        textarea {
            font-family: unset; // Fix for @mentions overlay
            font-size: unset; // Fix for @mentions overlay
            height: auto;
        }
    }

    [class*="StravaMentionsInput--suggestions--"],
    [class*="MentionableComment--suggestions--"] {
        ul {
            background-color: color.shade(bg, 4%);

            li[aria-selected="true"] {
                background-color: color.shade(bg, 10%) !important;
            }

            li:hover {
                background-color: color.shade(bg, 7%) !important;
            }
        }
    }

    #kudos-comments-container {
        [class*="ADPKudosAndComments--count--"] {
            color: unset;
        }
    }

    .activity-stats {
        .section {
            border-color: $soft-border-color;
        }

        .secondary-stats.inline-stats:not(.sauce-stats) {
            background-color: color.lighten(bg, 5%);
        }
    }

    .activity-summary-container:before {
        border-color: $soft-border-color;
    }

    td {
        border-bottom-color: $mid-border-color;
    }

    .actions-menu {
        border-color: transparent;
        background-color: color.shade(bg, 10%);
        border-radius: 4px;

        > .slide-menu.active {
            background-color: transparent;
        }

        > .button:hover,
        > .slide-menu .selection:hover {
            background-color: color.shade(bg, 15%) !important;
        }

        > * {
            background-color: color.shade(bg, 10%) !important;
            border-radius: inherit;
        }
    }

    #heading {
        .button {
            background: transparent;
        }

        .button,
        .sharing {
            border-color: transparent
        }
    }

    .lightbox-window {
        $body-bg-color: color.shade(bg, 10%);
        $tabs-bg-color: color.shade(bg, 15%);
        background-color: $body-bg-color;
        color: color.shade(fg, 10%);
        border: none;

        .modal-content {
            background-color: $body-bg-color;
            color: color.shade(fg, 10%);
        }

        .modal-header,
        .glossary-header,
        header {
            background-color: color.shade(accent, -20%);
            color: color.shade(accent, 80%);
            border-color: $soft-border-color;
        }

        .tabs {
            background-color: $tabs-bg-color;
            border-color: $hard-border-color;

            .tab {
                color: inherit;
            }

            .selected {
                background-color: $body-bg-color;
            }
        }

        .modal-body,
        .glossary-body {
            background-color: $body-bg-color !important;
        }

        .modal-footer {
            background-color: color.shade(bg, 0%) !important;
        }

        .comments,
        .list-athletes {
            li,
            form {
                border-color: $hard-border-color !important;
            }
        }

        .glossary-body .btn-group-vertical .btn.selected {
            background-color: color.shade(bg, 5%);
        }

        .help-content {
            .nav .dt {
                color: color.shade(fg, 10%);

                &:hover {
                    color: color.shade(fg, 0%);
                }

                &.selected {
                    color: color.shade(accent, 8%);
                }
            }

            .main {
                background-color: color.shade(bg, 5%);
            }
        }

        .share-lightbox {
            .main .row {
                background-color: $tabs-bg-color;
                margin: 0 -15px; // Fix strava off by one style error
            }
        }

        .tab-contents {
            background-color: $body-bg-color;
            border-color: $mid-border-color;

            > div {
                background-color: $body-bg-color;
            }
        }
    }

    .modal .modal-dialog .modal-body {
        background-color: color.shade(bg, 10%);
    }

    .chart-data-loading-overlay {
        background-color: color.get(bg);
    }

    [class*="Controls--controls-selectors--"] {
        [class*="-container"] {
            color: color.shade(fg, 8%);

            [class*="-control"] {
                background-color: color.shade(bg, 8%);
                border-color: $hard-border-color;

                [class*="-singleValue"],
                [class*="ActivitySelect--value-container--"],
                .text-subhead {
                    color: inherit;
                }

                &:hover {
                    background-color: color.shade(bg, 2%);
                }

                [class*="-indicatorContainer"] svg {
                    stroke: color.get(fg);
                }
            }

            [class*="-menu"] {
                background-color: color.shade(bg, 8%);

                [class*="-option"] {
                    background-color: color.shade(bg, 8%);

                    &:hover {
                        background-color: color.shade(bg, 12%);
                    }

                    input[type="radio"],
                    input[type="checkbox"] {
                        & + svg {
                            stroke: color.get(fg);
                        }

                        &[checked] + svg {
                            stroke: color.get(accent);
                        }
                    }
                }
            }
        }
    }

    input[type="text"],
    input[type="number"],
    input[type="date"],
    textarea,
    .textarea-clone,
    select {
        &:not(.prio.hack) {
            background-color: color.shade(bg, 3%);
            color: color.shade(fg, 8%);
            border-color: $hard-border-color;
            border-style: solid;

            &:focus {
                background-color: color.shade(bg, 0%);
                color: color.shade(fg, 2%);
                border-color: $hard-border-color;
            }

            &::placeholder {
                color: color.shade(fg, 40%, 80%);
            }
        }
    }

    #notifications-drop-down {
        border-color: $hard-border-color !important;

        li {
            border-color: $hard-border-color !important;

            &.unread {
                background-color: color.shade(bg, 2%) !important;
            }
        }
    }

    .activity-summary .others-section-v2 {
        border-color: $hard-border-color !important;
    }

    #map-container,
    #map-canvas {
        border: none;
    }

    .grabber {
        border-color: $hard-border-color !important;
    }

    #heading.collapsed header,
    #progress-goals .yearly-goal {
        border-color: $hard-border-color !important;
    }

    .infobox {
        background-color: color.shade(bg, 2%) !important;
        color: color.shade(fg, 2%) !important;
    }

    #basic-analysis #effort-detail {
        color: color.shade(fg, 2%) !important;
    }

    .base-chart {
        rect.simple-bar {
            stroke: color.shade(bg, 8%);
        }

        .grid-line {
            stroke: color.shade(bg, 8%);
        }

        .line-chart-curr-fill,
        .line-chart-range-fill,
        .area-chart-curr-fill {
            fill: color.shade(fg, 10%);
        }

        .area-chart-curr-fill {
            opacity: 0.5;
        }

        .s-chart-tooltip-svg,
        #infoBox rect,
        .chart-tooltip {
            fill: color.shade(bg, 15%);
            stroke: color.shade(fg, 10%);
            shape-rendering: auto;
        }

        .chart-tooltip text,
        .chart-tooltip-label,
        .chart-tooltip-unit {
            fill: color.shade(fg, 10%);
        }

        .crossbar {
            stroke: color.shade(fg, 3%);
        }
    }

    #basic-analysis {
        g .bottom-line.partial,
        .xaxis-container .domain,
        .base-chart .extent {
            stroke: color.shade(fg, 30%) !important;
        }
    }

    #relative-effort {
        [class*="WeekInsight--title"] {
            color: color.shade(fg, 10%);
        }

        [class*="WeekInsight--description"],
        [class*="WeekInsight--date-range"] {
            color: color.shade(fg, 20%);
        }

        [class*="ActivitySummary--impact"] {
            color: color.shade(fg, 5%);
        }

        table[class*="Activities--table"] {
            tr {
                &:nth-child(odd) {
                    background-color: #7773;
                }

                td {
                    background-color: transparent;
                }
            }
        }
    }

    svg.recharts-surface {
        g.recharts-layer {
            path.recharts-area-area {
                fill: color.shade(accent, -30%);
            }

            path.recharts-area-curve {
                stroke: color.shade(fg, 30%);
            }
        }

        g.recharts-cartesian-grid-vertical,
        g.recharts-cartesian-axis {
            line {
                stroke: color.shade(fg, 40%);
            }
        }

        circle.recharts-dot {
            fill: color.shade(fg, 0%);
            stroke: color.shade(bg, 50%);
        }
    }

    footer {
        background-color: color.shade(bg, 5%);
        color: color.shade(fg, 8%);
        border-color: $hard-border-color;

        .footer-promos,
        .footer-global {
            background-color: transparent;
            color: inherit;

            a {
                color: inherit;
            }
        }
    }

    #athlete-profile {
        #totals li strong {
            color: color.shade(fg, 5%);
        }
    }

    .sidebar-footer {
        a,
        .dropdown .btn,
        .copyright {
            color: color.shade(fg, 15%);
        }
    }

    .activity-map-tag {
        background-color: color.shade(bg, 10%) !important;
        border-color: $hard-border-color;
        color: color.shade(fg, 0%);
    }

    .entry-images .entry-image-wrapper {
        background-color: transparent;
    }

    .tabbed-cards {
        .tabs {
            &.tabs-justified > li {
                border-bottom: none;
            }

            > li .tab {
                background-color: color.shade(bg, 12%);
                border-color: $hard-border-color;
            }

            > li.selected .tab,
            > li[aria-selected="true"] .tab {
                background-color: color.shade(bg, 8%);
            }

            > li:hover .tab {
                background-color: color.shade(bg, 20%);
            }
        }

        .tab-contents {
            border-top: none;
            border-color: $hard-border-color;
            background-color: color.shade(bg, 8%);

            > div {
                background-color: color.shade(bg, 8%);
            }
        }
    }

    #js-dashboard-athlete-goals {
        [class*="ProgressGoalsRelativeEffortTab--head"] {
            color: color.shade(fg, 10%);
        }

        [class*="WeeklyGraph--container"] {
            background-color: transparent;

            svg {
                text {
                    fill: color.get(fg);
                }
            }
        }

        .text-caption2 {
            color: color.shade(fg, 10%);
        }

        [class*="WeekChart--bar"] {
            > span {
                background-color: color.shade(fg, 10%);
            }
        }

        [class*="Stat--stat-label"] {
            color: color.shade(fg, 10%);
        }
    }

    .feed-ui,
    .react-feed-container,
    .virtual-feed-container {
        [data-testid="web-feed-entry"] {
            background-color: color.shade(bg, 8%);
            color: color.shade(fg, 10%);

            [class*="EntryHeader--icon-container--"] {
                background-color: color.shade(bg, 5%);
                border-color: color.shade(bg, 5%);
            }

            [class*="ActivityEntryBody--trophy-count-btn--"],
            [class*="KudosAndComments--count-wrapper--"],
            [class*="CommentsThread--comments--"] {
                button {
                    background-color: transparent;
                    color: color.shade(fg, 10%);
                }
            }

            button[class*="CommentsThread--more-comments-button--"] {
                color: color.shade(fg, 10%) !important;
            }

            [class*="PhotosAndMapImage--entry-image-wrapper--"] {
                background-color: color.shade(bg, 11%);
            }

            [class*="--icon-container--"] {
                background-color: transparent;
            }

            [class*="Avatar--img-wrapper--"],
            [class*="Avatar-module__imgWrapper--"],
            [class*="__iconContainer--"] {
                background-color: transparent;
            }

            [class*="KudosAndComments--kudos-and-comments--"] {
                ol[class*="AvatarGroup--list--"] li > div {
                    background-color: color.shade(bg, 5%);
                    border-color: color.shade(bg, 5%);

                    > div {
                        background-color: color.shade(bg, 5%);
                    }
                }

                [class*="KudosAndComments--media-actions--"] button {
                    background-color: color.shade(bg, 15%);
                    border-color: $hard-border-color;
                    color: color.shade(fg, 10%);
                    opacity: 0.8;

                    &:hover {
                        opacity: 1;
                    }
                }
            }

            li strong {
                color: color.shade(fg, 0%);
            }

            ul[class*="Stats--list-stats--"] {
                color: color.shade(fg, 8%);

                [class*="Stat--stat-label--"] {
                    color: color.shade(fg, 12%);
                }
            }

            [class*="ActivityEntryBody--achievements-summary--"],
            [class*="ActivityEntryBody--description-body--"],
            [class*="ActivityEntryBody--stat-subtext--"],
            [class*="GroupActivity--headline-text-btn--"], // old
            [class*="GroupActivity__headline-text-btn--"], // new
            [class*="MediaBody--media-body--"],
            [class*="__subtitle-wrapper--"] *,
            [class*="__achievements-summary--"] *,
            [class*="__comment-text--"] {
                color: color.shade(fg, 10%) !important;
            }

            [class*="__statLabel--"],
            [class*="__stat-subtext--"] {
                color: color.shade(fg, 15%) !important;
            }
            [class*="__statValue--"],
            [class*="__stat-text--"] {
                color: color.shade(fg, 10%) !important;
            }

            button {
                color: color.shade(accent4, 10%);
            }

            [class*="MaharajAchievementCelebration--achievement-celebration--"],
            [class*="AchievementCelebration__achievement-celebration--"] {
                background-color: color.shade(bg, 15%);
                color: color.shade(fg, 10%);
            }
        }
    }

    .stat-subtext,
    .react-feed-component time {
        color: color.shade(fg, 10%);
    }

    .invite-friends {
        background-color: color.shade(bg, 8%);
    }

    ul.tabs {
        border-bottom: 1px solid $hard-border-color;

        .tab {
            color: color.shade(fg, 8%);
        }

        > li {
            border-bottom: 1px solid $hard-border-color;

            &:hover .tab {
                background-color: color.shade(bg, 8%);
            }
        }

        > li.selected,
        > li[aria-selected='true'] {
            // Requires that every tab.selected has background color set.
            border-bottom: none;

            .tab {
                background-color: transparent;  // See above, this is a fallback
                border-color: $hard-border-color;
                color: color.shade(fg, 2%);
            }
        }
    }

    ul.list-athletes > li {
        border-color: $hard-border-color;
    }

    table.striped tr:last-child td {
        border-color: $soft-border-color;
    }

    .table-striped > tbody > {
        tr:nth-of-type(even) {
            background-color: color.shade(bg, 3%);
        }
    }

    #activity_table.table-striped {
        tr:nth-of-type(even) {
            background-color: color.shade(bg, 3%);
        }

        tr:nth-of-type(odd) {
            background-color: color.shade(bg, 5%);
        }

        td {
            background: transparent;
        }
    }

    .striped {
        > li,
        > div,
        > tr {
            border-color: $soft-border-color;

            &:nth-child(even) {
                background-color: color.shade(bg, 3%);
            }
        }
    }

    .table > tbody > tr > td {
        border-color: $mid-border-color;
    }

    .table th {
        background-color: color.shade(bg, 8%);
        border-color: $soft-border-color;
    }

    .sidebar {
        .comparison table {
            th, td {
                border-color: $soft-border-color;
            }
        }

        .section {
            border-color: $soft-border-color;
        }
    }

    .drop-down-menu .options a,
    .slide-menu .options a,
    .drop-down-menu .options .clickable,
    .slide-menu .options .clickable,
    .drop-down-menu .options .btn,
    .slide-menu .options .btn {
        color: color.shade(fg, 8%);
    }

    #profile-heatmap-upsell,
    section.feature-section,
    .section.feature-section {
        background-color: color.shade(bg, 5%);
        color: color.shade(fg, 5%);
    }

    [class|="StarToggle--star"] {
        background: transparent !important;
    }

    .panel {
        background-color: color.get(bg);
        border-color: $hard-border-color;
        color: color.get(fg);

        &.panel-default {
            > .panel-footer {
                background-color: color.get(bg);
                border-color: $hard-border-color;
            }
        }
    }

    #search-results {
        th {
            background-color: color.shade(bg, 5%);
            border-color: $hard-border-color;

            > .btn {
                border: none;
                border-radius: 0;
            }
        }

        td.active,
        th.active {
            background-color: color.shade(bg, 8%);
        }
    }

    .challenge-list-view li {
        &,
        .challenge-logo {
            border-color: $soft-border-color;
        }
    }

    #explorer .main-content {
        #segments-sidebar,
        .toggle-sidebar.hide {
            background-color: color.shade(bg, 8%);
        }

        #segment-list ul li:hover {
            background-color: color.shade(bg, 15%);
        }
    }

    .info {
        color: color.shade(fg, 8%);
    }

    .leaflet-control-layers, .leaflet-bar {
        background-color: color.shade(bg, 8%);
    }

    .leaflet-container .leaflet-control-attribution {
        background-color: color.shade(bg, 8%);
    }

    .leaflet-popup-content-wrapper,
    .map-legends,
    .map-tooltip,
    .segment-info-box {
        background-color: color.shade(bg, 8%);
    }

    .segment-info-box .info-box-header h1 {
        color: color.shade(fg, 8%);
    }

    .segment-info-box .records {
        background-color: color.shade(bg, 10%);
    }

    .segment-info-box .details-link .button {
        border-color: $hard-border-color;
    }

    #strava-map-controls {
        a {
            color: color.shade(fg, 8%);
        }

        button,
        .button,
        .drop-down-menu .selection {
            background-color: color.shade(bg, 8%);
            color: color.shade(fg, 8%);

            &:hover {
                background-color: color.shade(bg, 15%);
            }
        }

        .drop-down-menu .selection::after {
             border-top-color: color.shade(fg, 8%);
        }
    }

    .elevation-chart,
    .activity-charts {
        .axis,
        .info-box,
        .chart-separator {
            stroke: color.shade(fg, 8%);
        }

        .grid {
            stroke: color.shade(bg, 20%);
        }

        .fill {
            fill: color.shade(bg, 25%, 50%);
        }

        .info-box {
            fill: color.shade(bg, 10%, 50%);
        }
    }

    .leaderboard {
        .filters {
            border-color: $hard-border-color;

            a, .option {
                color: color.shade(fg, 8%);
            }

            a.selected {
                background-color: color.shade(accent, -8%);
            }

            a:hover {
                background-color: color.shade(accent, -12%);
            }

            .option {
                background-color: color.shade(bg, 8%);
                background-image: none;
            }

            #premium-new ul {
                border-color: $hard-border-color;
            }
        }

        td.athlete a {
            color: color.shade(fg, 15%);
        }

        tr.highlighted {
            td:not(:last-child) {
                border-right-color: $hard-border-color;
            }

            td {
                background-color: color.shade(bg, 20%);
            }
        }
    }

    .leaflet-container {
        .leaflet-control-attribution a,
        .map-info-container a {
            color: color.shade(fg, 8%);
        }
    }

    .feed-header #feed-filter {
        &.open .dropdown-toggle {
            background-color: color.shade(bg, 15%);
            border-color: $hard-border-color;
            color: color.shade(fg, 10%);
        }

        .dropdown-toggle:hover {
            background-color: color.shade(bg, 18%);
        }
    }

    .dropdown-menu {
        background-color: color.shade(bg, 5%);
        color: color.shade(fg, 5%);
        overflow: auto !important;

        > li > a {
            &::after {
                border-color: $soft-border-color;
            }

            &:hover,
            &:focus {
                background-color: color.shade(bg, 10%);
                color: color.shade(fg, 2%);
            }
        }
    }

    .dropdown.open {
        .btn.dropdown-toggle {
            &,
            &:hover,
            &:focus {
                background-color: color.shade(bg, 2%);
                border-color: $hard-border-color;
            }
        }

        ul li .btn {
            background-color: color.shade(bg, 2%);

            &:hover {
                background-color: color.shade(bg, 5%);
            }
        }
    }

    ul.routes-list li.route-card {
        background-color: color.shade(bg, 5%);
        color: color.shade(fg, 5%);

        .timestamp {
            background-color: color.shade(bg, 8%);
            color: color.shade(fg, 8%);
        }

        .actions {
            background-color: color.shade(bg, 8%);
            color: color.shade(fg, 8%);
        }
    }

    .inline-stats .label,
    .inline-stats .stat-subtext,
    .inline-stats.nav-style a {
        color: color.shade(fg, 5%);
    }
    .inline-stats.nav-style a:hover {
        color: $link-color-hover;
    }

    label,
    .label,
    .form-control-label {
        color: color.shade(fg, 5%);
    }

    .sport-select {
        border-color: $hard-border-color;
    }

    hr {
        border-color: $hard-border-color;
    }

    .ui-datepicker {
        border-color: $hard-border-color;
        background-color: color.shade(bg, 8%);
        color: color.shade(fg, 8%);

        .ui-datepicker-header {
            background-color: color.shade(bg, 12%);
            color: color.shade(fg, 12%);
        }
    }

    & {
        $ride-color: color.shade(ride, 0%, 0.9);
        $ride-border-color: color.shade(ride, 10%, 0.9);
        $run-color: color.shade(run, 0%, 0.9);
        $run-border-color: color.shade(run, 10%, 0.9);
        $swim-color: color.shade(swim, 0%, 0.9);
        $swim-border-color: color.shade(swim, 10%, 0.9);
        $other-color: color.shade(other, 0%, 0.9);
        $other-border-color: color.shade(other, 10%, 0.9);
        $summary-color: #111;

        .activity-summary-v2 {
            .activity-breakdown {
                .legend dt.label-ride::after,
                .cycling {
                    background-color: $ride-color;
                    border-color: $ride-border-color;
                }

                .legend dt.label-run::after,
                .running {
                    background-color: $run-color;
                    border-color: $run-border-color;
                }

                .legend dt.label-swim::after,
                .swimming {
                    background-color: $swim-color;
                    border-color: $swim-border-color;
                }

                .legend dt.label-other::after,
                .swimming {
                    background-color: $other-color;
                    border-color: $other-border-color;
                }
            }

            .activity-calendar {
                .highlighted .activity-indicator {
                    background-color: color.shade(fg, 12%);
                }

                .day {
                    color: color.shade(fg, 12%);
                }
            }
        }


        .ride-type-ride,
        .ride-type,
        .ride-workout-type-10,
        .tt-workout-type-ride .key-chip,
        .tt-workout-type-virtualride,
        .tt-workout-type-ebikeride {
            .key-chip {
                background-color: $ride-color;
            }
        }

        .run-type-run,
        .run-workout-type-0,
        .run-type,
        .tt-workout-type-run {
            .key-chip {
                background-color: $run-color;
            }
        }

        .swim-type,
        .tt-workout-type-swim {
            .key-chip {
                background-color: $swim-color;
            }
        }

        #training-header {
            background-color: color.get(bg);
            color: color.shade(fg, 0%);
        }

        #training-log-intervals {
            .activity-type-wrapper {
                stroke: color.shade(bg, 40%);
                fill: color.shade(bg, 15%);
            }

            .activity-sport-ride,
            .activity-type-ride,
            .activity-type-ebikeride,
            .activity-type-virtualride {
                fill: $ride-color;
                stroke: $ride-border-color;
            }

            .activity-sport-run,
            .activity-type-run {
                fill: $run-color;
                stroke: $run-border-color;
            }

            .activity-sport-swim,
            .activity-type-swim {
                fill: $swim-color;
                stroke: $swim-border-color;
            }

            .activity-threshold-zero {
                fill: color.shade(fg, 20%) !important;
                stroke: color.shade(bg, 20%) !important;
            }

            .sum,
            text.day-total {
                fill: $summary-color !important;
            }
        }
    }

    [class*="training--sticky--"],
    [class*="training--calendar-header--"] {
        background-color: color.get(bg);
    }

    [class*="training--calendar-header--"],
    [class*="Calendar--calendar-row-container--"],
    [class*="training--calendar-container--"],
    [class*="Controls--controls-container--"] {
        border-color: $mid-border-color;
    }

    [class*="training--top-container--"] {
        [class*="CommuteToggle--label--"],
        [class*="WeekOverview--date-range--"],
        [class*="WeekOverview--summary-dimension--"],
        [class*="Timeline--years--"] a {
            color: color.get(fg);
        }
    }

    [class*="Popup--contents--"] {
        background-color: color.shade(bg, 12%);
        color: color.shade(fg, 8%);
    }

    .color-text-secondary {
        color: color.shade(fg, 10%);
    }

    [class*="Activity--activity-row--"]:hover {
        [class*="Activity--activity-name--"] {
            color: color.shade(fg, 5%);
        }
    }

    [class*="Timeline--months--"] > li[class*="Timeline--selected--"] {
        border-color: color.shade(fg, 5%);
    }

    [class*="components--notifications-menu--"] button[class*="components--notifications-button--"] {
        background-color: transparent;
        border: none;
    }

    .posts.topics,
    #discussion-topics {
        > li {
            border-color: $hard-border-color;
        }

        .post-container ol.comments > li {
            border-color: $soft-border-color;

            &.see-all {
                background-color: color.shade(bg, 5%);
                color: color.shade(fg, 5%);
            }
        }
    }

    .shared-content {
        border-color: $soft-border-color;

        .shared-content-text {
            color: color.shade(fg, 5%);
        }
    }

    #header-photos ul a {
        border-color: $soft-border-color;
    }

    .profile-heading .avatar img {
        border-color: $hard-border-color;
    }

    a.view-all-link {
        color: color.shade(fg, 5%);
    }

    .athlete-graph ul.intervals .interval {
        border-left-color: $soft-border-color;
    }

    .photostream .show-more {
        background-color: color.shade(bg, 5%);

        a, .btn {
            color: color.shade(fg, 5%);

            &:hover,
            &:focus {
                background-color: color.shade(bg, 15%);
            }
        }
    }

    // https://www.strava.com/activities/3989350790/photos/7E786277-39C8-471C-839F-46757947F849
    main.photo-view {
        a {
            color: $link-color;

            &:hover,
            &:focus {
                color: $link-color-hover;
            }
        }

        .photo-main .photo-container {
            background-color: color.shade(bg, 5%);
        }

        .photo-sidebar {
            background-color: color.get(bg);
        }
    }

    .select2-drop {
        background-color: color.shade(bg, 12%);
        color: color.shade(fg, 12%);
    }

    .select2-container {
        .select2-search-choice {
            background-color: color.shade(bg, 8%);
            color: color.shade(fg, 2%);
        }

        .select2-choices {
            background-color: color.shade(bg, 12%);
            color: color.shade(fg, 12%);
            border-color: $hard-border-color;

            .select2-search-choice {
                box-shadow: 0 0 2px color.shade(bg, 30%) inset;
            }
        }
    }

    .select2-results {
        .select2-no-results,
        .select2-searching,
        .select2-selection-limit {
            background-color: color.shade(bg, 15%);
            color: color.shade(fg, 15%);
        }
    }

    #performance-goal {

        .email-share-container {
            a {
                color: color.shade(fg, 12%);
            }
        }

        .others-leaderboard {
            header, .header {
                color: color.shade(bg, 8%);
            }
        }
    }

    .strava-tt {
        background-color: color.shade(bg, 12%);
        color: color.shade(fg, 12%);
        border-color: $hard-border-color;

        .tt-date, .tt-start, .tt-type, table {
            color: inherit;
        }
    }

    .xt-day {
        text-shadow: initial;
    }

    .month-chart {
        .week-total-primary {
            fill: color.shade(fg, 8%);
        }

        .week-total-secondary {
            fill: color.shade(fg, 12%);
        }

        .week-total-tertiary {
            fill: color.shade(fg, 15%);
        }

        .date-range, .month-change-text {
            fill: color.shade(fg, 10%);
        }

        .current-week-pill {
            fill: color.shade(bg, 10%);
        }

        .rest-day, .xt-day, .no-rest, .today-label {
            fill: color.shade(fg, 18%);
        }
    }

    .training-log-ftue-lightbox {
        background-color: color.shade(bg, 8%);
    }

    #privacy-control #privacy-control-options {
        background-color: color.shade(bg, 8%);
    }

    ol#events-nav {
        li ol.months > li,
        .year > a {
            border-color: color.shade(bg, 10%);
            background-color: transparent !important;
        }

        a {
            color: color.shade(fg, 15%);
        }

        li.selected {
            ol.months > li.selected {
                border-color: color.shade(accent, -10%);
            }

            > a {
                color: color.shade(fg, 0%);
            }
        }

        > li ol ol.events li a {
            color: color.shade(fg, 8%);
        }
    }

    .week-shelf,
    .week-shelf-connection {
        shape-rendering: auto;
        stroke: color.shade(bg, 20%);
        stroke-dashArray: initial;
    }

    .year-calendar {
        strong {
            color: color.shade(fg, 2%);
        }

        a {
            background-color: color.shade(bg, 8%);
            color: color.shade(fg, 8%);

            &:hover {
                background-color: color.shade(bg, 12%);
            }
        }

        .interval-graph .bar .fill {
            background-color: color.shade(fg, 8%);
        }
    }

    .interval-graph {
        .label strong,
        .legend strong {
            color: color.shade(fg, 8%);
        }
    }

    .month-calendar {
        th, td {
            border-color: $soft-border-color;
        }

        th {
            background-color: color.shade(bg, 12%);
        }

        td {
            background-color: color.shade(bg, 8%);
        }

        .day {
            color: color.shade(fg, 8%);
        }
    }

    table.distribution-chart tbody td:not(:last-child) {
        background-color: color.shade(bg, 12%);
    }

    .pinned .pinnable {
        background-color: color.get(bg);
    }

    .segments-list {
        &.ride,
        &.swim {
            tr.selected {
                background-color: color.shade(bg, 5%);
            }
        }

        .no-segments {
            box-shadow: initial;
        }
    }

    .ride, .swim {
        .segment-effort-detail {
            .content {
                border-color: $hard-border-color;
            }

            .rank strong {
                color: color.shade(fg, 2%);
            }

            .pr-comparison {
                background-color: color.shade(bg, 10%);
                border-color: $hard-border-color;
            }

            .segment-leaderboard table {
                background-color: color.shade(bg, 10%);
                color: color.shade(fg, 8%);

                thead {
                    background-color: color.shade(bg, 14%);
                }

                th {
                    color: color.shade(fg, 8%);
                }

                tr td:last-child {
                    color: color.shade(fg, 33%);
                }

                tr.current-athlete td:last-child {
                    color: color.shade(fg, 12%);
                }
            }

            .leaderboard-footer {
                background-color: color.shade(bg, 10%);
            }
        }
    }

    .run .segment-effort-detail {
        border-color: $hard-border-color;

        .global-records {
            border-color: $mid-border-color;
        }

        &,
        .effort-details .avatar,
        .this-effort {
            background-color: color.shade(bg, 5%); // Must apply to all of these to hide some border lines
        }

        .leaderboard-summary {
            background-color: color.shade(bg, 8%);
        }

        .link-menu a {
            background-color: color.shade(bg, 12%);
            border-color: $hard-border-color;
        }
    }

    // Ride and run style (rare)
    .segment-effort-detail {
        .local-legend-container {
            background-color: color.shade(bg, 10%);
        }
    }

    table.segments,
    table.hidden-segments,
    table.laps-list {
        tr.selected > td:first-child {
            box-shadow: inset 3px 0 0 color.shade(accent, -5%);
        }
    }

    .drop-down-menu .options .opt-group .label,
    .slide-menu .options .opt-group .label {
        background-color: color.shade(bg, 5%);
    }

    .row [class*="spans"].border-left {
        border-color: $hard-border-color;
    }

    #appUpsell {
        background-color: color.shade(bg, 5%);
    }

    .list-devices li {
        background-color: color.shade(bg, 30%);
    }

    #uploadFile form {
        background-color: color.shade(bg, 8%);
    }

    button[class*="StepActions--cancel"] {
        background: transparent;
        border: none;
        color: color.get(accent4);
    }

    .visibility-section {
        border-color: $hard-border-color;
    }

    .stats-container {
        background-color: color.shade(bg, 4%);

        table.table {
            background-color: transparent;
        }
    }

    [class*="ExpandableOptionList--who-can-see"] {
        background-color: color.shade(bg, 5%);
        border-color: $hard-border-color;
    }

    .dropzone {
        background-color: color.shade(bg, 5%);
        border-color: $hard-border-color;
    }

    .activity-tags {
        label {
            background-color: color.shade(bg, 8%);
            border-color: $soft-border-color;

            &:hover {
                background-color: color.shade(bg, 12%);

                &::before,
                &::after {
                    border-right-color: color.shade(bg, 12%);
                }
            }

            &::before,
            &::after {
                border-right-color: color.shade(bg, 8%);
            }
        }

        input:checked + label {
            background-color: color.shade(accent2, 3%);
            color: color.shade(bg, 10%);

            &::before,
            &::after {
                border-right-color: color.shade(accent2, 3%);
            }
        }
    }

    #settings-menu {
        a:link,
        a:visited {
            background-color: color.shade(bg, 8%);
            color: color.shade(fg, 8%);
            border-color: $mid-border-color;
        }

        .selected a {
            background-color: color.shade(accent, -10%);
            color: color.shade(fg, -10%);
        }
    }

    .upsell {
        background-color: color.shade(bg, 5%);
    }

    .setting,
    .editable-setting {
        border-color: $mid-border-color;
    }

    .editable-setting {
        &:hover,
        &.editing {
            background-color: color.shade(bg, 12%);
            color: color.shade(fg, 10%);
        }
    }

    .setting-label,
    #my-profile .timezone-container {
        color: color.shade(fg, 10%);
    }

    table.gear tr:hover td {
        background-color: color.shade(bg, 12%);
    }

    #apps .app {
        border-color: $mid-border-color;
    }

    ul.list-objects > li {
        border-color: $mid-border-color;
    }

    #fitness-freshness .list-stats li {
        color: color.shade(fg, 8%);
    }

    .dropdown-menu > li {
        > a,
        > .btn {
            color: color.shade(fg, 8%);
        }
    }

    #about-container {
        background-color: color.shade(bg, 15%);
    }

    button.close-action {
        color: transparent;
    }

    .content form.search {
        background-color: color.shade(bg, 8%);
        border-color: $mid-border-color;
        box-shadow: none;
    }

    .card-body .chart-container {
        background-color: transparent;

        > svg.progress-bar-svg-container {
            background-color: color.shade(bg, 8%);
        }
    }

    .list-apps .app-card {
        background-color: color.shade(bg, 8%);
        border-color: $mid-border-color;
    }

    .apps-container {
        background-color: color.shade(bg, 8%);
        background-image: none;
        border-color: $mid-border-color;
    }

    #race-features {
        background-color: color.shade(bg, 3%);
        border-color: $mid-border-color;
        color: color.shade(fg, 3%);
    }

    #parent-regions-nav {
        background-color: color.shade(bg, 8%);
    }

    #regions-nav li a {
        color: color.shade(fg, 3%);
    }

    .list-parent-regions h2 {
        background-color: color.shade(bg, 8%);

        a {
            color: color.shade(fg, 3%);
        }
    }

    #global-footer {
        &,
        nav,
        .upsell-container {
            background-color: color.shade(bg, 5%);
            color: color.shade(fg, 12%);

            a {
                color: color.shade(fg, 12%);
            }
        }

        .footer-nav-wrapper:hover .footer-nav-menu:hover h4 {
            color: color.shade(fg, 12%);
        }
    }

    .testimonials {
        background-color: color.shade(bg, 5%);
        color: color.shade(fg, 12%);
    }

    .navbar {
        a:not(.btn),
        .dropdown .dropdown-toggle {
            color: color.shade(fg, 8%);
        }
    }

    .perk-row {
        background-color: color.shade(bg, 12%);

        .perk-details,
        .terms-link {
            color: color.shade(fg, 8%);
        }
    }

    .product {
        color: color.shade(fg, 8%);
    }

    #athlete-history-chart {
        #effort-box-activity-date {
            fill: color.shade(fg, 12%);
        }

        #effort-box {
            fill: color.shade(bg, 12%);
            stroke: color.shade(fg, 12%);
        }

        .vgrid,
        .axis {
            stroke: color.shade(bg, 5%);
        }

        #vgrid-selected {
            stroke: color.shade(accent, -15%);
        }
        #hgrid-selected {
            stroke: color.shade(accent4, 15%);
        }
    }

    .leaderboard .loading-panel {
        background-color: color.get(bg, 75%);
    }

    .stats-container .activity-map {
        background-color: color.shade(bg, 5%);
    }

    #similar-activities-trend-chart svg {
        .horiz-line, .vert-line {
            stroke: color.shade(bg, 15%);
        }
    }

    #similar-activities-section #similar-activities-chart-container #similar-activities-chart {
        .effort-flag {
            fill: color.shade(bg, 15%);
            stroke: color.shade(fg, 8%);
        }

        .effort-flag-link.original-effort-link,
        .effort-flag-pace {
            fill: color.shade(fg, 5%);
        }
    }

    #roster {
        thead th {
            background-color: color.shade(bg, 10%);
        }

        .roster-entry-row:nth-child(even) td {
            background-color: color.shade(bg, 3%);
        }
    }

    #sidebar {
        background-color: color.shade(bg, 8%);

        .info {
            background-color: color.shade(bg, 12%);
        }

        .labs-disclaimer {
            background-color: color.shade(bg, 15%);
        }
    }

    #compare-graph {
        &,
        #compare-info-text {
            background-color: color.shade(bg, 8%);
        }

        svg {
            text {
                fill: color.shade(fg, 8%);
            }

            line {
                fill: color.shade(fg, 8%);
            }
        }
    }

    #compare-outer {
        .ui-resizable-n {
            background-color: color.shade(bg, 8%);
        }
    }

    #scrubber {
        background-color: color.shade(bg, 8%);
    }

    #analysis-chart svg {
        .yaxis2,
        .xaxis {
            .tick line {
                stroke: color.shade(bg, 5%);
                shape-rendering: auto;
            }
        }

        line.baseline {
            stroke: color.get(fg);
        }
    }

    .add-to-roster {
        color: color.shade(accent4, 10%);
    }

    .remove-from-roster {
        color: color.shade(accent, -10%);
    }

    .pace-info-box {
        background-color: color.shade(bg, 8%);
        border-color: $hard-border-color;
    }

    #search-results.table .edit-col {
        background-color: color.shade(bg, 8%);
    }

    #content-view .activity-content .sidebar {
        background-color: color.get(bg);
    }

    #edit-activity {
        button[class*="PerceivedExertionInput--reset"] {
            background: transparent !important;
            color: color.shade($link-accent, 12%);
            border: none !important;
        }
    }

    a[class*="Button--btn--"]:not([class*="Button--primary--"]) {
        color: color.shade(fg, 8%);

        &:hover {
            color: color.shade($link-accent, 10%);
        }
    }

    [data-reach-listbox-popover] {
        background-color: color.shade(bg, 12%);
    }

    [data-reach-listbox-button] {
        background-color: color.shade(bg, 12%);
        border-color: $mid-border-color;

        &:hover {
            background-color: color.shade(bg, 5%);
        }
    }

    [data-reach-dialog-content] {
        background-color: color.shade(bg, 16%);

        .color-black {
            color: color.get(fg);
        }
    }

    [data-reach-listbox-option] {
        &[aria-selected="true"] {
            background-color: color.shade(bg, 2%);
        }
    }

    [data-reach-tab-list] {
        background-color: transparent;

        button[data-reach-tab] {
            background: transparent;
            border-color: transparent;
            border-top-color: transparent !important;
            border-left-color: transparent !important;
            border-right-color: transparent !important;
        }
    }

    table.hoverable > tbody {
        > tr:hover,
        > tr.highlighted {
            background-color: color.shade(fg, 10%, 0.1);
        }
    }

    .index-heading section {
        .place-holder {
            border-color: $hard-border-color;
        }

        .upsell {
            background-color: color.shade(bg, 5%);
            color: color.shade(fg, 8%);
        }
    }

    #basic-analysis .ride-segments-chart-upsell .upsell-text-container {
        background-color: color.shade(bg, 5%);

        .upsell-title {
            color: color.shade(fg, 8%);
        }

        .upsell-description {
            color: color.shade(fg, 12%);
        }
    }

    .marketing-upsell {
        background-color: color.shade(bg, 8%);
    }

    .leaderboard .leaderboards-upsell {
        background-color: color.shade(bg, 8%);

        .heading {
            color: color.shade(fg, 8%);
        }

        .text {
            color: color.shade(fg, 12%);
        }
    }

    .leaderboard .filters #premium-enhanced ul {
        border-color: $hard-border-color;
    }

    .list-categories h3 a {
        color: color.shade(fg, 0%);

        &:hover,
        &:active {
            color: color.shade(fg, -5%);
        }
    }

    .ride,
    .swim {
        .segment-effort-detail .leaderboard-footer .seg-leaderboard-upsell {
            background-color: color.shade(bg, 8%);

            .heading {
                color: color.shade(fg, 8%);
            }

            .text {
                color: color.shade(fg, 12%);
            }
        }
    }

    body.fullscreen {
        #elevation-profile {
            background-color: color.get(bg);
        }

        #view {
            background-color: color.get(bg);
        }
    }

    .ui-dialog {
        background-color: color.shade(bg, 15%);
        border-color: $mid-border-color;
        outline: none;

        .ui-dialog-titlebar {
            background-color: color.shade(bg, 12%);
            color: color.shade(fg, 5%);
            border-color: $mid-border-color;
        }
    }

    [class*="CollapsibleSection--subsection--"] {
        a {
            color: color.get($link-accent);
        }

        [class*="CollapsibleSection--light--"] {
            color: color.shade(fg, 20%);
        }
        [class*="CollapsibleSection--dark--"] {
            color: color.shade(fg, -5%);
        }
    }

    [class*="Summary--container--"] {
        a {
            color: color.get($link-accent);
        }
    }

    [class*="Gallery--page-body--"] {
        background-color: color.get(bg);

        a {
            color: color.get(fg);

            &:hover {
                color: color.get($link-accent);
            }
        }

        [class*="PromotedDoradoSection--challenge-info--"] {
            background-color: color.shade(bg, 5%);
        }
    }

    [class*="ChallengeCard--challenge-card--"] {
        background-color: color.shade(bg, 5%);
    }

    [class*="Leaderboard--container--"] {
        [class*="Leaderboard--privacy-section--"] {
            background-color: color.shade(bg, 5%);
        }
    }

    .react-select__control {
        background-color: color.shade(bg, 5%);
        border-color: color.shade(bg, 25%);

        &:hover {
            border-color: color.shade(bg, 35%);
        }

        .react-select__value-container {
            .react-select__single-value {
                color: color.shade(fg, 0%);
            }

            .react-select__indicator-separator {
                background-color: color.shade(fg, 40%);
            }

            .react-select__indicator {
                color: color.shade(fg, 15%);
            }
        }
    }

    .react-select__menu {
        background-color: color.shade(bg, 5%);
        border-color: color.shade(bg, 25%);

        .react-select__option {
            color: color.shade(fg, 2%);

            &:hover {
                background-color: color.shade(bg, 15%);
            }
        }
    }

    [class*="CreatePost--input-wrapper--"] {
        label {
            color: color.shade(fg, 20%);
        }
    }

    table[class*="LeaderboardsTable--table--"] {
        thead tr {
            background-color: transparent;

            th {
                border-color: color.shade(bg, 25%);
            }
        }

        tbody tr {
            border-color: color.shade(bg, 25%) !important;
            color: color.shade(fg, 2%) !important;

            td {
                [class*="Leaderboard--name--"] a {
                    color: color.shade(fg, 2%) !important;
                }
            }
        }
    }

    [class*="Show--top-row--"] {
        border-color: color.shade(bg, 25%);
    }

    [class*="Stat--stat--"] [class*="Stat--stat-label--"],
    [class*="DataGrid--title--"] {
        color: color.shade(fg, 2%);
    }

    .challenge {
        .location {
            color: color.shade(fg, 10%);
        }

        .progress-bar {
            background-color: color.shade(bg, 10%);

            .current-progress {
                background-color: color.shade(fg, 10%) !important;
            }
        }

        table.participants td.percent-text {
            color: color.shade(fg, 10%);
        }
    }

    #segment-visualizer {  /* the potential-segment-matches page.. */
        .segment-details {
            background-color: color.shade(bg, 5%);
        }
    }

    & {
        $bg: color.shade(bg, 16%);

        .tooltip,
        .super-tooltip {
            background-color: $bg;
            color: color.shade(fg, 5%);
            border-color: $mid-border-color;
        }

        .super-tooltip {
            .title {
                background-color: color.shade(bg, 12%);
                border-color: $hard-border-color;
            }

            &::after {  // The diamon on the bottom
                background-color: $bg;
                border-color: $mid-border-color;
            }
        }
    }

    [data-react-class="SegmentDetailsSideBar"] {
        li[class*="SegmentDetailsSideBar--card--"] {
            border-color: $mid-border-color;

            [class*="SegmentDetailsSideBar--action-link--"] {
                border-color: $mid-border-color;
            }
        }

        [class*="CardActionsSection--url-label--"] {
            color: color.shade(fg, 10%);

            &:hover {
                &, * {
                    color: $link-color-hover;
                }
            }
        }
    }

    table.sortable {
        thead th {
            &:not(.nosort):hover {
                background-color: color.shade(bg, 10%);
            }

            a, .button {
                color: color.shade(fg, 10%);
            }
        }
    }

    .leaderboard-page {
        .leaderboard .unit {
            color: inherit;
        }

        .leaders.section {
            table {
                border-color:  $hard-border-color;

                tbody td {
                    background: color.shade(bg, 3%);
                    border-color:  $mid-border-color;
                }
            }
        }

        .leaderboard table {
            thead th.active {
                background: color.shade(bg, 8%);
            }

            tbody td.highlighted-column {
                background: color.shade(bg, 4%);
            }
        }
    }
}


:root {
    &.sauce-theme-dark {
        @include dark.theme;
    }

    &.sauce-theme-windows31 {
        @include windows31.theme;
    }

    &.sauce-theme-royalpeach {
        @include royalpeach.theme;
    }

    &.sauce-theme-deepred {
        @include deepred.theme;
    }
}
